!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sapp=t():e.sapp=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var c in n)e.o(n,c)&&!e.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:n[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};return((e,t,n)=>{n.d(t,{default:()=>v});const c={version:"1.1.1",ready:function(e){window.plus?setTimeout((function(){e()}),0):document.addEventListener("plusready",(function(){e()}),!1)}},i=e=>({code:0,data:e||"",msg:"执行成功"}),r=e=>({code:-1,data:null,msg:e||"执行失败"});function o(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}function a(e){return null==e?String(e):"object"}function s(e){return null!=e&&e===e.window}function u(e){return"object"===a(e)}function f(e){return u(e)&&!s(e)&&Object.getPrototypeOf(e)===Object.prototype}function l(e,t,n){e.dispatchEvent(new o(t,{detail:n,bubbles:!0,cancelable:!0}))}function d(e,t,n){e&&(""!==n&&f(n=n||{})&&(n=JSON.stringify(n||{}).replace(/\'/g,"\\u0027").replace(/\\/g,"\\u005c")),e.evalJS("typeof sapp!=='undefined'&&sapp.core.receive('"+t+"','"+n+"')"))}const w={type:a,isWindow:s,isObject:u,isPlainObject:f,trigger:l,registerService:function(e,t){window.addEventListener(e,(async e=>{const n=e.detail?e.detail.success:"",c=e.detail?e.detail.fail:"",i=e.detail?e.detail:{},r=plus.webview.getTopWebview();try{const e=await t(i);n&&d(r,n,e)}catch(e){c&&d(r,c,e)}}))},dispatch:function(e,t={}){const n={},{success:c,fail:i}=t;n.success=function(t){window.removeEventListener(e+"-success",n.success),"function"==typeof c&&c(t.detail)},n.fail=function(t){window.removeEventListener(e+"-fail",n.fail),"function"==typeof i&&i(t.detail)},window.addEventListener(e+"-success",n.success),window.addEventListener(e+"-fail",n.fail),d(plus.webview.getLaunchWebview(),e,{success:e+"-success",fail:e+"-fail",params:t})},receive:function(e,t){if(e){try{t&&(t=JSON.parse(t))}catch(e){console.error(e)}l(document,e,t)}},fire:d};function y(){return new Promise((async(e,t)=>{try{ViewService.reload(),e(i())}catch(e){t(r())}}))}const p={logOut:y,reload:y,getAuthorization:function(){return new Promise(((e,t)=>{try{const t=TokenService.getToken();e(i(t))}catch(e){t(r("token获取失败"))}}))},getLocation:function(){return new Promise((async(e,t)=>{try{const t=await LocationService.getLocation();e(i(t))}catch(e){t(r(e))}}))},chooseImage:function({params:e}){return new Promise((async(t,n)=>{try{const n=await FileService.chooseImage(e);t(i(n))}catch(e){n(r(e))}}))},checkVersion:function(){return new Promise((async(e,t)=>{try{VersionService.checkVersion(),e(i())}catch(e){t(r())}}))},setStatusBarStyle:function({params:e}){return new Promise((async(t,n)=>{try{ViewService.setStatusBarStyle(e),t(i())}catch(e){n(r())}}))},setStatusBarBackground:function({params:e}){return new Promise((async(t,n)=>{try{ViewService.setStatusBarBackground(e),t(i())}catch(e){n(r())}}))},showSafearea:function({params:e}){return new Promise((async(t,n)=>{try{ViewService.showSafearea(e),t(i())}catch(e){n(r())}}))},hideSafearea:function(){return new Promise((async(e,t)=>{try{ViewService.hideSafearea(),e(i())}catch(e){t(r())}}))},getStatusbarHeight:function(){return new Promise((async(e,t)=>{try{const t=await ViewService.getStatusbarHeight();e(i(t))}catch(e){t(r())}}))},getSafeAreaHeight:function(){return new Promise((async(e,t)=>{try{const t=await ViewService.getSafeAreaHeight();e(i(t))}catch(e){t(r())}}))},getSystemInfo:function(){return new Promise((async(e,t)=>{try{const t=await SystemService.getSystemInfo();e(i(t))}catch(e){t(r())}}))}};!function(){for(let e in p)w.registerService(e,p[e])}(),console.info("sapp-js-runtime: ",c.version);const v={config:c,core:w,service:p}})(0,t,e),t.default})()}));